
  <!DOCTYPE html>
  <html lang="pt-BR">
  <title>LAMPADAS - CASA 2</title>
  
  <script language="javascript">
  function id( el ){
  return document.getElementById( el );
  }
  function getXmlHttpRequest() { //Requisição HTTP
    if (window.XMLHttpRequest) {
      return new XMLHttpRequest();
    } else if (window.ActiveXObject) {
      return new ActiveXObject("Microsoft.XMLHTTP");
    }
  }
  
  function envia(comando){      
    var IP = "http://138.185.242.135:8080/";
    var xmlhttp = getXmlHttpRequest();
    xmlhttp.open("POST", IP + comando, true);
    xmlhttp.onreadystatechange = function(){        
    if (xmlhttp.readyState==4){
      console.log(xmlhttp.responseText);
      //id("Resposta_da_ESP").innerHTML = xmlhttp.responseText;
    }     
    } 
     xmlhttp.send(null);  
   }
  function Atualiza(){  //função simples para atualizar a página manualmente
        location.reload();
    }
  
  function Clock_Display(){ //mostra a hora atual
  var c = new Date();
  
  id('hora').innerHTML = c.toLocaleTimeString();
  id('data').innerHTML = c.toLocaleDateString();
  
  if(c.toLocaleTimeString() === "18:00:00"){
    console.log("lg_ext");
    envia("lg_ext");
  }else if(c.toLocaleTimeString() === "03:00:00"){
    console.log("dlg_ext");
    envia("dlg_ext");
  }
  
  setTimeout('Clock_Display()',1000);
  }
  
</script>

  <body onload = "Clock_Display()" onload = "Atualiza()">
  <center>
  <h1>Controle de Lampadas da Casa 2 </h1><br>
  <table>
    <tr><th><span id = "hora"></span></th></tr> 
    <th><span id = "data"></span></th>      
  </table>
  <hr>
  </center>
  
  </body>
  </html>